<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="calc.css">
    <title>Calculator</title>
    <style type="text/css" media="all">
      
.container{
    text-align: center;
    margin-top: 23;
}

h1{
    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
}

table{
    margin: auto;
    padding-top: 20px;
}

input{
    font-size: 33px;
    border: 3px solid rgb(255 94 0);
    border-radius: 15px;
    padding: 5px;
    background: rgb(3, 3, 3);
    color: rgb(243, 237, 237);
}

button:hover{
    background-color: rgb(29, 29, 29);
    transform: scale(0.9);
}

button{
    
    font-size: 25px;
    background-color: rgb(0, 0, 0);
    width: 80px;
    height: 80px;
    border-radius: 40px;
    display: inline-block;
    color: rgb(255 94 0); 
    border: none;
    
   
}


button:hover, 
button:focus {
  animation: pulse 1s;
  box-shadow: 2 3 4 2em rgba(#fff,0);
}
.num{
    color: white;
    font-weight: 800;
}

#plus{
  
    height: 160px;
}

.spOperators{
    color: rgba(245, 244, 244, 0.555);
    font-weight: bold;
}
.calculator{
    display: inline-block;
    background-color:#3a3a3a;
    padding: 23px;
    border-radius: 30px;
    border: 4px solid rgb(255 94 0);
}
    </style>
</head>
<body>  
    <div class="container">
        <h1>Calculator - by Sajjad Mazhar</h1>
        
        <div class="calculator">
            <input type="text" name="screen" id="screen">
            <table>
                <tr>
                    <td><button class = "spOperators">sqr</button></td>
                    <td><button class = "spOperators">(</button></td>
                    <td><button class = "spOperators">)</button></td>
                    <td><button class = "spOperators">AC</button></td>
                    <td><button>del</button></td>
                </tr>
                <tr>
                    <td><button class = "spOperators">mod</button></td>
                    <td><button class = "spOperators">sin</button></td>
                    <td><button class = "spOperators">cos</button></td>
                    <td><button class = "spOperators">tan</button></td>
                    <td><button>+</button></td>
                </tr>
              
                <tr>
                    <td><button class = "spOperators">pi</button></td>
                    <td><button class="num">7</button></td>
                    <td><button class="num">8</button></td>
                    <td><button class="num">9</button></td>
                    <td><button>x</button></td>
                </tr>
                <tr>
                    <td><button class = "spOperators">log</button></td>
                    <td><button class="num">4</button></td>
                    <td><button class="num">5</button></td>
                    <td><button class="num">6</button></td>
                    <td><button>-</button></td>
                </tr>
                <tr>
                    <td><button class = "spOperators">^</button></td>
                    <td><button class="num">1</button></td>
                    <td><button class="num">2</button></td>
                    <td><button class="num">3</button></td>
                    <td rowspan="2"><button id="plus">=</button></td>
                    
                </tr>
                
                <tr>
                    <td><button class = "spOperators">sqrt</button></td>
                    <td><button class = "spOperators">.</button></td>
                    <td><button class="num">0</button></td>
                    <td><button>/</button></td>
                </tr>
                
                <tr>
                    <td><button class = "spOperators">n!</button></td>
                    <td><button class = "spOperators"><sup>n</sup>C<sub>r</sub></button></td>
               <td><button class = "spOperators">%</button></td>
                </tr>
                
            </table>
        </div>
    </div>
</body>
<script>
  let screen = document.getElementById("screen");
let allButtons = document.querySelectorAll("button");
let screenOutput = "";
let deg = `&{Math.PI /180}`;

function factorial(n) {
    if (n == 0) {
        return 1;
    }
    return n * factorial(n - 1);
}

for (button of allButtons) {
    button.addEventListener("click", function (element) {
        buttonText = element.target.innerText;

        if (buttonText == 'x') {
            buttonText = '*';
            screenOutput += buttonText;
            screen.value = screenOutput;
        }
        else if (buttonText == 'AC') {
            screenOutput = "";
            screen.value = screenOutput;
        }
        else if (buttonText == 'pi') {
            buttonText = Math.PI;
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'sin') {

            buttonText = "Math.sin(Math.PI/180*";
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'cos') {
            buttonText = "Math.cos(Math.PI/180*";
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'tan') {
            buttonText = "Math.tan(Math.PI/180*";
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'mod') {
            buttonText = "%";
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'sqrt') {
            buttonText = "Math.sqrt(";
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'log') {
            buttonText = "Math.log10(";
            screenOutput += buttonText;
            screen.value = screenOutput;
        }
        else if (buttonText == '%') {
            buttonText = "*(1/100)*";
            screenOutput += buttonText;
            screen.value = screenOutput;
        }
        else if (buttonText == 'sqr') {
            buttonText = `*${screenOutput}`;
            screenOutput += buttonText;
            screen.value = screenOutput;
        }
        else if (buttonText == '^') {
            buttonText = `**`;
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'del') {
            screenOutput = screenOutput.slice(0, -1);
            screen.value = screenOutput;
        }

        else if (buttonText == 'n!') {
            buttonText = '!';
            screenOutput += buttonText;
            screen.value = screenOutput;
        }

        else if (buttonText == 'nCr'){
            buttonText = 'C';
            screenOutput += buttonText;
            screen.value = screenOutput;
        }


        else if (buttonText == '=') {
            if (screen.value.includes("!")) {
                let n = screen.value.slice(0, -1);
                screenOutput = factorial(n);
                screen.value = '=' + screenOutput;
                screenOutput = screen.value.substring(1);
            }

            else if (screen.value.includes("C")){
                let ncr = screen.value;
                let n='';
                let r;
                for (let index in ncr){
                    if (ncr[index] != 'C'){
                        n += ncr[index];
                    }
                    else if(ncr[index]=='C'){
                        r = ncr.slice(index).slice(1);
                        break

                    }
                }
                
                screenOutput = factorial(n)/(factorial(r) * factorial(n-r));
                screen.value = '=' + screenOutput;
                screenOutput = screen.value.substring(1);


            }

            else {

                try {
                    screen.value = '=' + eval(screenOutput);
                    screenOutput = screen.value.substring(1);
                }
                catch (err) {
                    screenOutput = err;
                    screen.value = screenOutput;
                    screenOutput = "";
                }
            }
        }

        else {
            screenOutput += buttonText;
            screen.value = screenOutput;

        }
    })

}
</script>
</html>
